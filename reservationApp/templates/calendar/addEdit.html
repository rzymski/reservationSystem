<div id="AddEditModal"  tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden rounded-t-lg fixed top-20 right-0 bottom-0 left-0 m-auto z-20 w-1/4" style="container-type: inline-size; min-width: 600px">
    <div class="border border-gray-200 dark:border-gray-400 border-solid rounded-lg">
        <div name="header" class="headerContainer bg-gray-100 dark:bg-gray-700 border-b border-solid border-gray-300 flex justify-between items-center cursor-move rounded-t-lg">
            <div class="flex items-center">
                <h3 class="font-bold"><span id="titleAddEditModal"></span></h3>
            </div>
            <div id="myActions" class="cursor-pointer flex items-center">
                <div onclick="minimalizeAddEditModal()" class="iconContainer bg-transparent rounded-lg ms-auto inline-flex justify-center items-center border border-gray-200 hover:bg-gray-200 dark:border-slate-500 dark:text-gray-50 dark:hover:bg-slate-500">
                    <i class="fa-solid fa-window-minimize fa-xl"></i>
                </div>
                <div onclick="maximizeAddEditModal()"  class="iconContainer bg-transparent rounded-lg ms-auto inline-flex justify-center items-center border border-gray-200 hover:bg-gray-200 dark:border-slate-500 dark:text-gray-50 dark:hover:bg-slate-500">
                    <i class="fa-solid fa-expand fa-xl"></i>
                </div>
                <div onclick="closeModal('AddEditModal')"  class="iconContainer bg-transparent rounded-lg ms-auto inline-flex justify-center items-center border border-gray-200 hover:bg-gray-200 hover:text-red-500 dark:border-slate-500 dark:text-gray-50 dark:hover:bg-red-500">
                    <i class="fa-solid fa-xmark fa-xl"></i>
                </div>
            </div>
        </div>
        <div name="content" class="contentContainer bg-gray-50 dark:bg-slate-600 rounded-b-lg">
            <div class="text-center" >
                <div class="text-left">
                    <div id="inputControlAddEditModal" class="grid gap-4 grid-cols-2 input-control">
                        <div id="startDateContainerAddEditModal">
                            <label for="startDate" class="block font-medium text-gray-900 dark:text-white">Data początkowa</label>
                            <div>
                                <input id="startDateAddEditModal" type="date" name="startDate" class="startDate bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Data początkowa" required>
                            </div>
                        </div>
                        <div id="startTimeContainerAddEditModal">
                            <label for="startTime" class="block font-medium text-gray-900 dark:text-white">Czas początkowy</label>
                            <div class="relative inputTime">
                                <input id="startTimeAddEditModal" type="time" name="startTime" class="startTime bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Czas początkowy" required>
                                <div class="inputCurrentTime">
                                    <span onclick="fillCurrentTime('AddEditModal', 'startTime')" class="text-blue-500 mr-6 cursor-pointer">teraz</span>
                                </div>
                            </div>
                        </div>
                        <div id="endDateContainerAddEditModal">
                            <label for="endDate" class="block font-medium text-gray-900 dark:text-white">Data końcowa</label>
                            <div>
                                <input id="endDateAddEditModal" type="date" name="endDate" class="endDate bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Data końcowa" required>
                            </div>
                        </div>
                        <div id="endTimeContainerAddEditModal">
                            <label for="endTime" class="block font-medium text-gray-900 dark:text-white">Czas końcowy</label>
                            <div class="relative inputTime">
                                <input id="endTimeAddEditModal" type="time" name="endTime" class="endTime bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Czas końcowy" required>
                                <div class="inputCurrentTime">
                                    <span onclick="fillCurrentTime('AddEditModal', 'endTime')" class="text-blue-500 mr-6 cursor-pointer">teraz</span>
                                </div>
                            </div>
                        </div>
                        <div id="intervalTimeContainerAddEditModal" class="col-span-2 sm:col-span-1">
                            <label for="intervalTime" class="block font-medium text-gray-900 dark:text-white">Przedziały czasowe</label>
                            <select id="intervalTimeAddEditModal" name="intervalTime" class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                <option value="" selected="">Długość przedziału</option>
                                {% for value, textValue in rangeFrom15to180increasesBy15 %}
                                    <option value="{{ value }}">{{ textValue }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div id="breakBetweenIntervalsContainerAddEditModal" class="col-span-2 sm:col-span-1">
                            <label for="breakBetweenIntervals" class="block font-medium text-gray-900 dark:text-white">Przerwa pomiędzy</label>
                            <select id="breakBetweenIntervalsAddEditModal" name="breakBetweenIntervals" class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                <option value="0" selected="">Długość przerwy</option>
                                <option value="0">0 minut</option>
                                <option value="5">5 minut</option>
                                <option value="10">10 minut</option>
                                <option value="15">15 minut</option>
                                <option value="20">20 minut</option>
                                <option value="25">25 minut</option>
                                <option value="30">30 minut</option>
                            </select>
                        </div>
                        <div id="errorDisplayAddEditModal" name="errorDisplay" class="error col-span-2"></div>
                        <input type="hidden" name="id" id="selectedEventIdAddEditModal" value="-1">
                        <div class="col-span-1">
                            <button onclick="addEditEvent()" id="saveBtnAddEditModal" type="submit" class="w-full text-gray-50 flex items-center justify-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-bold rounded-lg text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                <i class="fa-solid fa-plus"></i>
                                <span id="btnTextAddEditModal" class="ms-3 whitespace-nowrap"></span>
                            </button>
                        </div>
                        <div class="col-span-1">
                            <button onclick="closeModal('AddEditModal')" id="btnCancelAddEditModal"  class="w-full text-gray-500 bg-gray-50 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 font-bold text-center hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">
                                Anuluj
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    let addEditModal = document.querySelector('#AddEditModal');
    let headerAddEditModal = document.querySelector('#AddEditModal [name="header"]');
    let contentAddEditModal = document.querySelector('#AddEditModal [name="content"]');
    let isMouseDownHeaderAddEditModal = false;
    let isMouseOverActionsAddEditModal = false;
    let isMaximizedAddEditModal = false;

    let offsetXAddEditModal = 0;
    let offsetYAddEditModal = 0;

    let leftStyleAddEditModal = '0px';
    let topStyleAddEditModal = '80px';

    function maximizeAddEditModal(){
        console.log('MAXMIZE')
        if (isMaximizedAddEditModal) {
            addEditModal.style.left = leftStyleAddEditModal;
            addEditModal.style.top = topStyleAddEditModal;
            console.error("Initial po pomniejszeniu =", leftStyleAddEditModal, " i ", topStyleAddEditModal)

            addEditModal.classList.remove('w-full')
            addEditModal.classList.add('w-1/4')
        } else {
            contentAddEditModal.classList.remove('hidden')
            addEditModal.style.left = '0px';
            addEditModal.style.top = '80px';
            console.error("Initial po powiekszeniu =", leftStyleAddEditModal, " i ", topStyleAddEditModal)

            addEditModal.classList.remove('w-1/4')
            addEditModal.classList.add('w-full')
        }
        isMaximizedAddEditModal = !isMaximizedAddEditModal;
        headerAddEditModal.classList.toggle('cursor-move');
    };
    function minimalizeAddEditModal(){
        console.log('MINIMIZE')
        contentAddEditModal.classList.toggle('hidden');
    };

    headerAddEditModal.addEventListener('mousedown', e=> {
        if (isMouseOverActionsAddEditModal || isMaximizedAddEditModal) return;
        console.log("JEST NA HEADER = ", leftStyleAddEditModal, " i ", topStyleAddEditModal)

        isMouseDownHeaderAddEditModal = true;
        offsetXAddEditModal = addEditModal.offsetLeft - e.clientX;
        offsetYAddEditModal = addEditModal.offsetTop - e.clientY;
    });

    document.addEventListener('mousemove', e => {
        if (isMouseOverActionsAddEditModal || isMaximizedAddEditModal) return;
        if (!isMouseDownHeaderAddEditModal) return;
        e.preventDefault()

        addEditModal.classList.remove('top-20');
        addEditModal.classList.remove('right-0');
        addEditModal.classList.remove('bottom-0');
        addEditModal.classList.remove('left-0');

        leftStyleAddEditModal = addEditModal.style.left = e.clientX + offsetXAddEditModal + "px";
        topStyleAddEditModal = addEditModal.style.top = e.clientY + offsetYAddEditModal + "px";
    });

    document.addEventListener('mouseup', e => {
        if (isMouseOverActionsAddEditModal || isMaximizedAddEditModal) return;
        isMouseDownHeaderAddEditModal = false;
    });

    let myActions = document.getElementById('myActions');
    myActions.addEventListener('mouseover', () => {
        isMouseOverActionsAddEditModal = true;
    })

    myActions.addEventListener('mouseout', () => {
        isMouseOverActionsAddEditModal = false;
    })
</script>

{% comment %}<div id="AddEditModal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative p-4 w-full max-w-max max-h-full">
        <div class="relative bg-gray-50 rounded-lg shadow dark:bg-gray-700">
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-white me-2"><span id="titleAddEditModal"></span></h3>
                <button onclick="closeModal('AddEditModal')" type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-toggle="crud-modal">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <div class="p-4 md:p-5">
                <div id="inputControlAddEditModal" class="grid gap-4 mb-4 grid-cols-2 input-control">
                    <div id="startDateContainerAddEditModal">
                        <label for="startDate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Data początkowa</label>
                        <div>
                            <input id="startDateAddEditModal" type="date" name="startDate" class="startDate bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Data początkowa" required>
                        </div>
                    </div>
                    <div id="startTimeContainerAddEditModal">
                        <label for="startTime" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Czas początkowy</label>
                        <div class="relative inputTime">
                            <input id="startTimeAddEditModal" type="time" name="startTime" class="startTime bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Czas początkowy" required>
                            <div class="inputCurrentTime">
                                <a href="javascript:void(0);" onclick="fillCurrentTime('AddEditModal', 'startTime')" class="text-blue-500 text-sm mr-6">teraz</a>
                            </div>
                        </div>
                    </div>
                    <div id="endDateContainerAddEditModal">
                        <label for="endDate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Data końcowa</label>
                        <div>
                            <input id="endDateAddEditModal" type="date" name="endDate"class="endDate bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Data końcowa" required>
                        </div>
                    </div>
                    <div id="endTimeContainerAddEditModal">
                        <label for="endTime" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Czas końcowy</label>
                        <div class="relative inputTime">
                            <input id="endTimeAddEditModal" type="time" name="endTime" class="endTime bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Czas końcowy" required>
                            <div class="inputCurrentTime">
                                <a href="javascript:void(0);" onclick="fillCurrentTime('AddEditModal', 'endTime')" class="text-blue-500 text-sm mr-6">teraz</a>
                            </div>
                        </div>
                    </div>
                    <div id="intervalTimeContainerAddEditModal" class="col-span-2 sm:col-span-1">
                        <label for="intervalTime" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Przedziały czasowe</label>
                        <select id="intervalTimeAddEditModal" name="intervalTime" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                            <option value="" selected="">Długość przedziału</option>
                            {% for value, textValue in rangeFrom15to180increasesBy15 %}
                                <option value="{{ value }}">{{ textValue }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div id="breakBetweenIntervalsContainerAddEditModal" class="col-span-2 sm:col-span-1">
                        <label for="breakBetweenIntervals" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Przerwa pomiędzy</label>
                        <select id="breakBetweenIntervalsAddEditModal" name="breakBetweenIntervals" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                            <option value="0" selected="">Długość przerwy</option>
                            <option value="0">0 minut</option>
                            <option value="5">5 minut</option>
                            <option value="10">10 minut</option>
                            <option value="15">15 minut</option>
                            <option value="20">20 minut</option>
                            <option value="25">25 minut</option>
                            <option value="30">30 minut</option>
                        </select>
                    </div>
                    <div id="errorDisplayAddEditModal" name="errorDisplay" class="error col-span-2"></div>
                    <input type="hidden" name="id" id="selectedEventIdAddEditModal" value="-1">
                    <div class="col-span-1">
                        <button onclick="addEditEvent()" id="saveBtnAddEditModal" type="submit" class="text-gray-50 flex items-center w-full justify-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-lg px-4 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                            <i class="fa-solid fa-plus"></i>
                            <span id="btnTextAddEditModal" class="ms-3 whitespace-nowrap"></span>
                        </button>
                    </div>
                    <div class="col-span-1">
                        <button id="btnCancelAddEditModal" onclick="closeModal('AddEditModal')"  class="w-full text-gray-500 bg-gray-50 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-lg font-bold px-1 py-2 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">
                            Anuluj
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>{% endcomment %}